# Chasing Extremes Agent 实验（带杠杆风险控制）

## 简介

这是 Chasing Extremes Agent 的带风险控制版本，用于测试杠杆限制风险控制是否有效。

## 策略逻辑

- **追涨**：当价格出现大幅上涨（超过阈值）时，全仓买入
- **追跌**：当价格出现大幅下跌（超过阈值）时，全仓卖出
- **杠杆风险控制**：通过 `LeverageLimitRiskManager` 限制总持仓市值不超过账户权益的一定比例（默认 80%）

## 参数说明

- `extreme_threshold`: 极端波动阈值（默认 5%）
- `lookback_days`: 回看天数，用于计算涨跌幅（默认 1 天）
- `max_position_weight`: 最大仓位（默认 100%，全仓）
- `chase_up`: 是否追涨（默认 True）
- `chase_down`: 是否追跌（默认 True）
- `max_leverage`: 最大杠杆率（默认 0.8，即总持仓市值不超过账户权益的 80%）

## 运行

```bash
python main.py
```

## 预期行为

这个 agent 会：
1. 在价格出现极端波动时，尝试全仓买入或卖出
2. 通过杠杆限制风险控制，限制总持仓市值不超过账户权益的 80%
3. 当杠杆率接近上限时，风险控制会削减或拒绝买入订单

## 用途

这个 agent 的主要用途是：
- 测试杠杆限制风险控制是否能够有效限制极端仓位
- 对比有风险控制和没有风险控制的策略表现
- 验证风险控制对策略收益的影响

## 与 1.3.0 的对比

- **1.3.0**: 没有风险控制，会全仓买入/卖出
- **1.3.1**: 有杠杆限制风险控制，总持仓市值不超过账户权益的 80%

通过对比这两个实验的结果，可以评估风险控制的有效性。

